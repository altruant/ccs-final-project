(this.webpackJsonpstatic=this.webpackJsonpstatic||[]).push([[0],{45:function(e,t,a){},47:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(19),r=a.n(i),o=a(7),c=(a(45),a(17)),l=a.n(c),u=a(21),m=a(9),h=a(10),p=a(2),d=a(13),b=a(12),g=a(4),v=a(69),y=(a(47),a(48),a(18)),f=a(11),E=a(26),k=a(23),O=a(15),j=a.n(O),S=a(27),C=a(33),I=a(34),T=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={body:""},n.handleInput=n.handleInput.bind(Object(p.a)(n)),n.addComment=n.addComment.bind(Object(p.a)(n)),n}return Object(h.a)(a,[{key:"handleInput",value:function(e){this.setState(Object(f.a)({},e.target.name,e.target.value))}},{key:"addComment",value:function(){this.props.addComment({timestamp:this.props.timestamp,parsedStamp:this.props.parsedStamp,body:this.state.body}),this.setState({body:""})}},{key:"render",value:function(){return s.a.createElement("div",{className:this.props.className},s.a.createElement("span",null,this.props.parsedStamp),s.a.createElement("input",{type:"text",name:"body",value:this.state.body,onChange:this.handleInput}),s.a.createElement("button",{type:"button",onClick:this.addComment},"Add Comment"))}}]),a}(s.a.Component),w=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={player:null,isEditing:!1,comments:[],parsedStamp:"0s",timestamp:"0"},n.getTimestamp=n.getTimestamp.bind(Object(p.a)(n)),n.getIDFomURL=n.getIDFomURL.bind(Object(p.a)(n)),n.handleInput=n.handleInput.bind(Object(p.a)(n)),n.handleSubInput=n.handleSubInput.bind(Object(p.a)(n)),n.onReady=n.onReady.bind(Object(p.a)(n)),n.seekToTime=n.seekToTime.bind(Object(p.a)(n)),n.addComment=n.addComment.bind(Object(p.a)(n)),n.removeComment=n.removeComment.bind(Object(p.a)(n)),n.edit=n.edit.bind(Object(p.a)(n)),n.updateLink=n.updateLink.bind(Object(p.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/links/".concat(this.props.match.params.id,"/")).then((function(e){return e.json()})).then((function(t){return e.setState(Object(E.a)({},t))}))}},{key:"updateLink",value:function(e){e.preventDefault();var t=Object(E.a)({},this.state);delete t.player,fetch("/api/links/".concat(this.props.match.params.id,"/"),{method:"PUT",headers:{"X-CSRFToken":j.a.get("csrftoken"),"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){return console.log(e)})).then(this.setState({isEditing:!this.state.isEditing}))}},{key:"getTimestamp",value:function(e){var t,a=e.target.getCurrentTime(),n=new Date(1e3*a).toISOString().substr(11,8);a<60?t=n.substr(6,7)+"s":a<600?t=n.substr(4,7):a<3600&&(t=n.substr(3,7)),this.setState({parsedStamp:t,timestamp:a})}},{key:"getIDFomURL",value:function(){var e=this.YouTubeGetID(this.state.youtube_url);this.setState({youtube_ID:e})}},{key:"YouTubeGetID",value:function(e){return void 0!==(e=e.split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/))[2]?e[2].split(/[^0-9a-z_-]/i)[0]:e[0]}},{key:"edit",value:function(){this.setState({isEditing:!this.state.isEditing})}},{key:"handleInput",value:function(e){this.setState(Object(f.a)({},e.target.name,e.target.value))}},{key:"handleSubInput",value:function(e,t){var a=Object(y.a)(this.state.comments);a[t].body=e.target.value,this.setState(a)}},{key:"onReady",value:function(e){this.setState({player:e.target})}},{key:"seekToTime",value:function(e){this.state.player.seekTo(e)}},{key:"addComment",value:function(e){var t=Object(y.a)(this.state.comments);t.push(e),this.setState({comments:t})}},{key:"removeComment",value:function(e){var t=Object(y.a)(this.state.comments);t.splice(e,1),this.setState({comments:t})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"container"},s.a.createElement(k.a,{videoId:this.state.youtube_ID,opts:{height:"390",width:"640"},onPause:this.getTimestamp,onReady:this.onReady}),s.a.createElement("div",{className:"info ".concat(this.state.isEditing?"hidden":"")},s.a.createElement("div",{className:"title"},s.a.createElement("h3",null,"".concat(this.state.title,"//").concat(localStorage.getItem("username"))),s.a.createElement(S.Icon,{onClick:this.edit,icon:C.a}),s.a.createElement(S.Icon,{icon:I.a})),this.state.comments.map((function(t,a){return s.a.createElement("div",{key:a},s.a.createElement("button",{onClick:function(){return e.seekToTime(t.timestamp)}},s.a.createElement("span",null,t.parsedStamp),s.a.createElement("span",null,t.body)))}))),s.a.createElement("div",{className:"editForm ".concat(this.state.isEditing?"":"hidden")},s.a.createElement("form",{onSubmit:this.updateLink},s.a.createElement("div",{className:"url-title"},s.a.createElement("input",{type:"url",value:this.state.youtube_url,onChange:this.handleInput,name:"youtube_url",placeholder:"Youtube URL"}),s.a.createElement("input",{type:"text",value:this.state.title,name:"title",placeholder:"Title"}),s.a.createElement("button",{type:"button",onClick:function(){return e.getIDFomURL()}},"Update Youtube URL")),s.a.createElement("div",{className:"comments"},this.state.comments.map((function(t,a){return s.a.createElement("div",{key:a},s.a.createElement("span",null,t.parsedStamp),s.a.createElement("input",{type:"text",name:"body",onChange:function(t){return e.handleSubInput(t,a)},value:t.body}),s.a.createElement("button",{type:"button",onClick:function(){return e.removeComment()}},"Remove"))})),s.a.createElement(T,{className:"comment-form ".concat(this.state.isEditing?"":"hidden"),addComment:this.addComment,timestamp:this.state.timestamp,parsedStamp:this.state.parsedStamp})),s.a.createElement("button",{type:"submit"},"Save"))))}}]),a}(s.a.Component),R=a(38);function F(e){var t=Object(n.useState)([]),a=Object(R.a)(t,2),i=a[0],r=a[1];return Object(n.useEffect)((function(){fetch("/api/links/").then((function(e){return e.json()})).then((function(e){return r(e)}))}),[]),s.a.createElement("div",null,i.map((function(t,a){return s.a.createElement("div",{key:a},s.a.createElement(o.b,{to:"".concat(e.match.url,"/").concat(t.id)},s.a.createElement("div",{className:"list-item-".concat(a)},s.a.createElement("img",{src:"https://img.youtube.com/vi/".concat(t.youtube_ID,"/0.jpg"),alt:"#"}),t.title)))})))}var L=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={youtube_url:"",title:"",comments:[],isCommenting:!1,isEditing:!0,youtube_ID:"",timestamp:"0",parsedStamp:"0s"},n.handleInput=n.handleInput.bind(Object(p.a)(n)),n.addComment=n.addComment.bind(Object(p.a)(n)),n.showForm=n.showForm.bind(Object(p.a)(n)),n.removeComment=n.removeComment.bind(Object(p.a)(n)),n.getTimestamp=n.getTimestamp.bind(Object(p.a)(n)),n.toggleTitle=n.toggleTitle.bind(Object(p.a)(n)),n}return Object(h.a)(a,[{key:"getTimestamp",value:function(e){var t,a=e.target.getCurrentTime(),n=new Date(1e3*a).toISOString().substr(11,8);a<60?t=n.substr(6,7)+"s":a<600?t=n.substr(4,7):a<3600&&(t=n.substr(3,7)),this.setState({parsedStamp:t,timestamp:a})}},{key:"YouTubeGetID",value:function(e){return void 0!==(e=e.split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/))[2]?e[2].split(/[^0-9a-z_-]/i)[0]:e[0]}},{key:"toggleTitle",value:function(){this.setState({isEditing:!this.state.isEditing})}},{key:"showForm",value:function(){this.setState({isCommenting:!0});var e=this.YouTubeGetID(this.state.youtube_url);this.setState({youtube_ID:e}),!0===this.state.isEditing&&this.toggleTitle()}},{key:"addComment",value:function(e){var t=Object(y.a)(this.state.comments);t.push(e),this.setState({comments:t})}},{key:"removeComment",value:function(e){var t=Object(y.a)(this.state.comments);t.splice(e,1),this.setState({comments:t})}},{key:"handleInput",value:function(e){this.setState(Object(f.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e,t=this;return e=null===localStorage.getItem("login")?s.a.createElement(s.a.Fragment,null,s.a.createElement("span",null,"Login to create a new Link")):s.a.createElement(s.a.Fragment,null,s.a.createElement("h2",null,"Create a new Link"),s.a.createElement(k.a,{className:"youtube-player ".concat(this.state.isCommenting?"":"hidden"),videoId:this.state.youtube_ID,opts:{height:"390",width:"640"},onPause:this.getTimestamp}),s.a.createElement("div",{className:"title ".concat(this.state.isCommenting?"":"hidden"," ").concat(this.state.isEditing?"hidden":"")},s.a.createElement("h3",null,"".concat(this.state.title,"//").concat(localStorage.getItem("username"))),s.a.createElement("button",{onClick:this.toggleTitle},"Edit")),s.a.createElement("form",{onSubmit:function(e){return t.props.submitLink(e,t.state)}},s.a.createElement("div",{className:"url-title ".concat(this.state.isEditing?"":"hidden")},s.a.createElement("input",{type:"url",name:"youtube_url",onChange:this.handleInput,value:this.state.youtube_url,placeholder:"Youtube URL"}),s.a.createElement("input",{type:"text",name:"title",onChange:this.handleInput,value:this.state.title,placeholder:"Title"}),s.a.createElement("button",{type:"button",onClick:this.showForm},"Continue")),this.state.comments.map((function(e,a){return s.a.createElement("div",{key:a},s.a.createElement("span",null,e.parsedStamp),s.a.createElement("span",null,e.body),s.a.createElement("button",{type:"button",onClick:function(){return t.removeComment(a)}},"Remove"))})),s.a.createElement(T,{className:"comment-form ".concat(this.state.isCommenting?"":"hidden"),addComment:this.addComment,timestamp:this.state.timestamp,parsedStamp:this.state.parsedStamp}),s.a.createElement("button",{className:"".concat(this.state.isCommenting?"":"hidden"),type:"submit"},"Save"))),s.a.createElement("div",{className:"container"},e)}}]),a}(s.a.Component),N=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={username:"",password:""},n.handleInput=n.handleInput.bind(Object(p.a)(n)),n}return Object(h.a)(a,[{key:"handleInput",value:function(e){this.setState(Object(f.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"container"},s.a.createElement("form",{onSubmit:function(t){return e.props.logIn(t,e.state)}},s.a.createElement("h2",null,"Login"),s.a.createElement("label",{htmlFor:"username"},"Username"),s.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleInput,placeholder:"Username"}),s.a.createElement("label",{htmlFor:"password"},"Password"),s.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleInput,placeholder:"Password"}),s.a.createElement("button",{type:"submit"},"Login")))}}]),a}(s.a.Component),D=Object(g.f)(N),x=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={username:"",email:"",password1:"",password2:""},n.handleInput=n.handleInput.bind(Object(p.a)(n)),n}return Object(h.a)(a,[{key:"handleInput",value:function(e){this.setState(Object(f.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"container"},s.a.createElement("form",{onSubmit:function(t){return e.props.handleRegister(t,e.state)}},s.a.createElement("h2",null,"Register"),s.a.createElement("label",{htmlFor:"username"},"Username"),s.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleInput,placeholder:"Username"}),s.a.createElement("label",{htmlFor:"email"},"Email"),s.a.createElement("input",{type:"email",name:"email",value:this.state.email,onChange:this.handleInput,placeholder:"Email"}),s.a.createElement("label",{htmlFor:"password1"},"Password"),s.a.createElement("input",{type:"password",name:"password1",value:this.state.password1,onChange:this.handleInput,placeholder:"Password"}),s.a.createElement("label",{htmlFor:"password2"},"Confirm Password"),s.a.createElement("input",{type:"password",name:"password2",value:this.state.password2,onChange:this.handleInput,placeholder:""}),s.a.createElement("button",{type:"submit"},"Register")))}}]),a}(s.a.Component),_=Object(g.f)(x),P=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={isLoggedIn:!1},n.logIn=n.logIn.bind(Object(p.a)(n)),n.logOut=n.logOut.bind(Object(p.a)(n)),n.handleRegister=n.handleRegister.bind(Object(p.a)(n)),n.submitLink=n.submitLink.bind(Object(p.a)(n)),n}return Object(h.a)(a,[{key:"logOut",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/accounts/rest-auth/logout/",{method:"POST",headers:{"X-CSRFToken":j.a.get("csrftoken"),"Content-Type":"application/json"},body:JSON.stringify(j.a.get("Authorization"))});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,console.log("Response",a),j.a.remove("Authorization"),localStorage.removeItem("login"),localStorage.removeItem("username"),this.setState({isLoggedIn:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"logIn",value:function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/accounts/rest-auth/login/",{method:"POST",headers:{"X-CSRFToken":j.a.get("csrftoken"),"Content-Type":"application/json"},body:JSON.stringify(a)});case 3:return n=e.sent,e.next=6,n.json();case 6:s=e.sent,console.log("Response",s),j.a.set("Authorization","Token ".concat(s.key)),localStorage.setItem("login","".concat(s.key)),localStorage.setItem("username","".concat(s.user.username)),this.props.history.push("/");case 12:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleRegister",value:function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/accounts/rest-auth/registration/",{method:"POST",headers:{"X-CSRFToken":j.a.get("csrftoken"),"Content-Type":"application/json"},body:JSON.stringify(a)});case 3:return n=e.sent,e.next=6,n.json();case 6:s=e.sent,console.log("Response",s),j.a.set("Authorization","Token ".concat(s.key)),localStorage.setItem("login",s.key),localStorage.setItem("username","".concat(s.user.username)),this.props.history.push("/");case 12:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"submitLink",value:function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/api/links/",{method:"POST",headers:{"X-CSRFToken":j.a.get("csrftoken"),"Content-Type":"application/json"},body:JSON.stringify(a)});case 3:return n=e.sent,e.next=6,n.json();case 6:s=e.sent,this.props.history.push("/links/".concat(localStorage.getItem("username"),"/your-links/").concat(s.id)),console.log("Response",s);case 9:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t;return null===localStorage.getItem("login")?(t=s.a.createElement(s.a.Fragment,null),e=s.a.createElement(s.a.Fragment,null,s.a.createElement(o.b,{to:"/register-form"},"Register"),s.a.createElement(o.b,{to:"/login-form"},"Login"))):(t=s.a.createElement(s.a.Fragment,null,s.a.createElement(o.b,{to:"/".concat(localStorage.getItem("username"),"/your-links")},"Your Links")),e=s.a.createElement(o.b,{onClick:this.logOut,to:"/"},"Logout")),s.a.createElement(s.a.Fragment,null,s.a.createElement(v.a,null,s.a.createElement(o.b,{to:"/"},"Home"),s.a.createElement(o.b,{to:"/create"},"Create"),s.a.createElement("div",{className:"user"},t,e)),s.a.createElement(g.c,null,s.a.createElement(g.a,{path:"/register-form"},s.a.createElement(_,{handleRegister:this.handleRegister})),s.a.createElement(g.a,{path:"/login-form"},s.a.createElement(D,{logIn:this.logIn})),s.a.createElement(g.a,{path:"/create"},s.a.createElement(L,{submitLink:this.submitLink})),s.a.createElement(g.a,{path:"/".concat(localStorage.getItem("username"),"/:id"),exact:!0,component:w}),s.a.createElement(g.a,{path:"/".concat(localStorage.getItem("username"),"/your-links"),component:F})))}}]),a}(s.a.Component),U=Object(g.f)(P),Y=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,70)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),i(e),r(e)}))};r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(o.a,null,s.a.createElement(U,null))),document.getElementById("root")),Y()}},[[66,1,2]]]);
//# sourceMappingURL=main.5b6ca8da.chunk.js.map