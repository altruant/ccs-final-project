(this.webpackJsonpstatic=this.webpackJsonpstatic||[]).push([[0],{39:function(t,e,n){},41:function(t,e,n){},60:function(t,e,n){"use strict";n.r(e);var a=n(1),s=n(0),i=n.n(s),r=n(19),o=n.n(r),c=n(15),l=(n(39),n(16)),u=n.n(l),h=n(20),d=n(10),m=n(11),b=n(5),j=n(14),p=n(13),O=n(4),g=n(63),v=(n(41),n(42),n(18)),f=n(26),x=n(17),y=n.n(x),C=n(28),k=function(t){Object(j.a)(n,t);var e=Object(p.a)(n);function n(t){var a;return Object(d.a)(this,n),(a=e.call(this,t)).state={body:""},a.handleInput=a.handleInput.bind(Object(b.a)(a)),a.addComment=a.addComment.bind(Object(b.a)(a)),a}return Object(m.a)(n,[{key:"handleInput",value:function(t){this.setState(Object(v.a)({},t.target.name,t.target.value))}},{key:"addComment",value:function(){this.props.addComment({timestamp:this.props.timestamp,parsedStamp:this.props.parsedStamp,body:this.state.body}),this.setState({body:""})}},{key:"render",value:function(){return Object(a.jsxs)("div",{className:this.props.className,children:[Object(a.jsx)("span",{children:this.props.parsedStamp}),Object(a.jsx)("input",{type:"text",name:"body",value:this.state.body,onChange:this.handleInput}),Object(a.jsx)("button",{type:"button",onClick:this.addComment,children:"Add Comment"})]})}}]),n}(i.a.Component),S=function(t){Object(j.a)(n,t);var e=Object(p.a)(n);function n(t){var a;return Object(d.a)(this,n),(a=e.call(this,t)).state={youtube_url:"",title:"",comments:[],isCommenting:!1,isEditing:!0,youtube_ID:"",timestamp:"0",parsedStamp:"0s"},a.handleInput=a.handleInput.bind(Object(b.a)(a)),a.addComment=a.addComment.bind(Object(b.a)(a)),a.submitLink=a.submitLink.bind(Object(b.a)(a)),a.showForm=a.showForm.bind(Object(b.a)(a)),a.removeComment=a.removeComment.bind(Object(b.a)(a)),a.getTimestamp=a.getTimestamp.bind(Object(b.a)(a)),a.toggleTitle=a.toggleTitle.bind(Object(b.a)(a)),a}return Object(m.a)(n,[{key:"getTimestamp",value:function(t){var e,n=t.target.getCurrentTime(),a=new Date(1e3*n).toISOString().substr(11,8);n<60?e=a.substr(6,7)+"s":n<600?e=a.substr(4,7):n<3600&&(e=a.substr(3,7)),this.setState({parsedStamp:e,timestamp:n})}},{key:"YouTubeGetID",value:function(t){return void 0!==(t=t.split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/))[2]?t[2].split(/[^0-9a-z_-]/i)[0]:t[0]}},{key:"toggleTitle",value:function(){this.setState({isEditing:!this.state.isEditing})}},{key:"showForm",value:function(){this.setState({isCommenting:!0});var t=this.YouTubeGetID(this.state.youtube_url);this.setState({youtube_ID:t}),!0===this.state.isEditing&&this.toggleTitle()}},{key:"addComment",value:function(t){var e=Object(f.a)(this.state.comments);e.push(t),this.setState({comments:e})}},{key:"removeComment",value:function(t){var e=Object(f.a)(this.state.comments);e.splice(t,1),this.setState({comments:e})}},{key:"handleInput",value:function(t){this.setState(Object(v.a)({},t.target.name,t.target.value))}},{key:"submitLink",value:function(){var t=Object(h.a)(u.a.mark((function t(e){var n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,fetch("/api/links/",{method:"POST",headers:{"X-CSRFToken":y.a.get("csrftoken"),"Content-Type":"application/json"},body:JSON.stringify(this.state)});case 3:return n=t.sent,t.next=6,n.json();case 6:a=t.sent,console.log("Response",a);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t,e=this;return t=null===localStorage.getItem("login")?Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("span",{children:"Login to create a new Link"})}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{children:"Create a new Link"}),Object(a.jsx)(C.a,{className:"youtube-player ".concat(this.state.isCommenting?"":"hidden"),videoId:this.state.youtube_ID,opts:{height:"390",width:"640"},onPause:this.getTimestamp}),Object(a.jsxs)("div",{className:"title ".concat(this.state.isCommenting?"":"hidden"," ").concat(this.state.isEditing?"hidden":""),children:[Object(a.jsx)("h3",{children:"".concat(this.state.title,"//").concat(localStorage.getItem("username"))}),Object(a.jsx)("button",{onClick:this.toggleTitle,children:"Edit"})]}),Object(a.jsxs)("form",{onSubmit:this.submitLink,children:[Object(a.jsxs)("div",{className:"url-title ".concat(this.state.isEditing?"":"hidden"),children:[Object(a.jsx)("input",{type:"url",name:"youtube_url",onChange:this.handleInput,value:this.state.youtube_url,placeholder:"Youtube URL"}),Object(a.jsx)("input",{type:"text",name:"title",onChange:this.handleInput,value:this.state.title,placeholder:"Title"}),Object(a.jsx)("button",{type:"button",onClick:this.showForm,children:"Continue"})]}),this.state.comments.map((function(t,n){return Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{children:t.parsedStamp}),Object(a.jsx)("span",{children:t.body}),Object(a.jsx)("button",{type:"button",onClick:function(){return e.removeComment(n)},children:"Remove"})]},n)})),Object(a.jsx)(k,{className:"comment-form ".concat(this.state.isCommenting?"":"hidden"),addComment:this.addComment,timestamp:this.state.timestamp,parsedStamp:this.state.parsedStamp}),Object(a.jsx)("button",{className:"".concat(this.state.isCommenting?"":"hidden"),type:"submit",children:"Save"})]})]}),Object(a.jsx)("div",{className:"container",children:t})}}]),n}(i.a.Component),I=function(t){Object(j.a)(n,t);var e=Object(p.a)(n);function n(t){var a;return Object(d.a)(this,n),(a=e.call(this,t)).state={username:"",password:""},a.handleInput=a.handleInput.bind(Object(b.a)(a)),a}return Object(m.a)(n,[{key:"handleInput",value:function(t){this.setState(Object(v.a)({},t.target.name,t.target.value))}},{key:"render",value:function(){var t=this;return Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)("form",{onSubmit:function(e){return t.props.logIn(e,t.state)},children:[Object(a.jsx)("h2",{children:"Login"}),Object(a.jsx)("label",{htmlFor:"username",children:"Username"}),Object(a.jsx)("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleInput,placeholder:"Username"}),Object(a.jsx)("label",{htmlFor:"password",children:"Password"}),Object(a.jsx)("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleInput,placeholder:"Password"}),Object(a.jsx)("button",{type:"submit",children:"Login"})]})})}}]),n}(i.a.Component),w=Object(O.f)(I),T=function(t){Object(j.a)(n,t);var e=Object(p.a)(n);function n(t){var a;return Object(d.a)(this,n),(a=e.call(this,t)).state={username:"",email:"",password1:"",password2:""},a.handleInput=a.handleInput.bind(Object(b.a)(a)),a}return Object(m.a)(n,[{key:"handleInput",value:function(t){this.setState(Object(v.a)({},t.target.name,t.target.value))}},{key:"render",value:function(){var t=this;return Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)("form",{onSubmit:function(e){return t.props.handleRegister(e,t.state)},children:[Object(a.jsx)("h2",{children:"Register"}),Object(a.jsx)("label",{htmlFor:"username",children:"Username"}),Object(a.jsx)("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleInput,placeholder:"Username"}),Object(a.jsx)("label",{htmlFor:"email",children:"Email"}),Object(a.jsx)("input",{type:"email",name:"email",value:this.state.email,onChange:this.handleInput,placeholder:"Email"}),Object(a.jsx)("label",{htmlFor:"password1",children:"Password"}),Object(a.jsx)("input",{type:"password",name:"password1",value:this.state.password1,onChange:this.handleInput,placeholder:"Password"}),Object(a.jsx)("label",{htmlFor:"password2",children:"Confirm Password"}),Object(a.jsx)("input",{type:"password",name:"password2",value:this.state.password2,onChange:this.handleInput,placeholder:""}),Object(a.jsx)("button",{type:"submit",children:"Register"})]})})}}]),n}(i.a.Component),F=Object(O.f)(T),R=function(t){Object(j.a)(n,t);var e=Object(p.a)(n);function n(t){var a;return Object(d.a)(this,n),(a=e.call(this,t)).state={isLoggedIn:!1},a.logIn=a.logIn.bind(Object(b.a)(a)),a.logOut=a.logOut.bind(Object(b.a)(a)),a.handleRegister=a.handleRegister.bind(Object(b.a)(a)),a}return Object(m.a)(n,[{key:"logOut",value:function(){var t=Object(h.a)(u.a.mark((function t(){var e,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/accounts/rest-auth/logout/",{method:"POST",headers:{"X-CSRFToken":y.a.get("csrftoken"),"Content-Type":"application/json"},body:JSON.stringify(y.a.get("Authorization"))});case 2:return e=t.sent,t.next=5,e.json();case 5:n=t.sent,console.log("Response",n),y.a.remove("Authorization"),localStorage.removeItem("login"),localStorage.removeItem("username"),this.setState({isLoggedIn:!1});case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"logIn",value:function(){var t=Object(h.a)(u.a.mark((function t(e,n){var a,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,fetch("/accounts/rest-auth/login/",{method:"POST",headers:{"X-CSRFToken":y.a.get("csrftoken"),"Content-Type":"application/json"},body:JSON.stringify(n)});case 3:return a=t.sent,t.next=6,a.json();case 6:s=t.sent,console.log("Response",s),y.a.set("Authorization","Token ".concat(s.key)),localStorage.setItem("login","".concat(s.key)),localStorage.setItem("username","".concat(s.user.username)),this.props.history.push("/");case 12:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"handleRegister",value:function(){var t=Object(h.a)(u.a.mark((function t(e,n){var a,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,fetch("/accounts/rest-auth/registration/",{method:"POST",headers:{"X-CSRFToken":y.a.get("csrftoken"),"Content-Type":"application/json"},body:JSON.stringify(n)});case 3:return a=t.sent,t.next=6,a.json();case 6:s=t.sent,console.log("Response",s),y.a.set("Authorization","Token ".concat(s.key)),localStorage.setItem("login",s.key),localStorage.setItem("username","".concat(s.user.username)),this.props.history.push("/");case 12:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t;return t=null===localStorage.getItem("login")?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(c.b,{to:"/register-form",children:"Register"}),Object(a.jsx)(c.b,{to:"/login-form",children:"Login"})]}):Object(a.jsx)(c.b,{onClick:this.logOut,to:"/",children:"Logout"}),Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(g.a,{children:[Object(a.jsx)(c.b,{to:"/",children:"Home"}),Object(a.jsx)(c.b,{to:"/create",children:"Create"}),Object(a.jsx)("div",{className:"user",children:t})]}),Object(a.jsxs)(O.c,{children:[Object(a.jsx)(O.a,{path:"/register-form",children:Object(a.jsx)(F,{handleRegister:this.handleRegister})}),Object(a.jsx)(O.a,{path:"/login-form",children:Object(a.jsx)(w,{logIn:this.logIn})}),Object(a.jsx)(O.a,{path:"/create",children:Object(a.jsx)(S,{})})]})]})}}]),n}(i.a.Component),L=Object(O.f)(R),N=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,64)).then((function(e){var n=e.getCLS,a=e.getFID,s=e.getFCP,i=e.getLCP,r=e.getTTFB;n(t),a(t),s(t),i(t),r(t)}))};o.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(c.a,{children:Object(a.jsx)(L,{})})}),document.getElementById("root")),N()}},[[60,1,2]]]);
//# sourceMappingURL=main.e1814d4c.chunk.js.map