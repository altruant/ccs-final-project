(this.webpackJsonpstatic=this.webpackJsonpstatic||[]).push([[0],{38:function(e,t,a){},40:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(19),o=a.n(s),i=a(14),l=(a(38),a(12)),c=a.n(l),u=a(18),m=a(8),h=a(9),p=a(4),d=a(11),b=a(10),g=a(3),v=a(62),f=(a(40),a(41),function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={links:[]},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/links/");case 2:t=e.sent,a=t.json(),this.setState({links:a});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,this.state.links.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("img",{src:"http://img.youtube.com/vi/".concat(e.youtube_ID,"/0.jpg/"),alt:"#"}),e.title)})))}}]),a}(r.a.Component)),y=a(17),E=a(24),k=a(26),O=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={body:""},n.handleInput=n.handleInput.bind(Object(p.a)(n)),n.addComment=n.addComment.bind(Object(p.a)(n)),n}return Object(h.a)(a,[{key:"handleInput",value:function(e){this.setState(Object(y.a)({},e.target.name,e.target.value))}},{key:"addComment",value:function(){this.props.addComment({timestamp:this.props.timestamp,parsedStamp:this.props.parsedStamp,body:this.state.body}),this.setState({body:""})}},{key:"render",value:function(){return r.a.createElement("div",{className:this.props.className},r.a.createElement("span",null,this.props.parsedStamp),r.a.createElement("input",{type:"text",name:"body",value:this.state.body,onChange:this.handleInput}),r.a.createElement("button",{type:"button",onClick:this.addComment},"Add Comment"))}}]),a}(r.a.Component),j=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={youtube_url:"",title:"",comments:[],isCommenting:!1,isEditing:!0,youtube_ID:"",timestamp:"0",parsedStamp:"0s"},n.handleInput=n.handleInput.bind(Object(p.a)(n)),n.addComment=n.addComment.bind(Object(p.a)(n)),n.showForm=n.showForm.bind(Object(p.a)(n)),n.removeComment=n.removeComment.bind(Object(p.a)(n)),n.getTimestamp=n.getTimestamp.bind(Object(p.a)(n)),n.toggleTitle=n.toggleTitle.bind(Object(p.a)(n)),n}return Object(h.a)(a,[{key:"getTimestamp",value:function(e){var t,a=e.target.getCurrentTime(),n=new Date(1e3*a).toISOString().substr(11,8);a<60?t=n.substr(6,7)+"s":a<600?t=n.substr(4,7):a<3600&&(t=n.substr(3,7)),this.setState({parsedStamp:t,timestamp:a})}},{key:"YouTubeGetID",value:function(e){return void 0!==(e=e.split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/))[2]?e[2].split(/[^0-9a-z_-]/i)[0]:e[0]}},{key:"toggleTitle",value:function(){this.setState({isEditing:!this.state.isEditing})}},{key:"showForm",value:function(){this.setState({isCommenting:!0});var e=this.YouTubeGetID(this.state.youtube_url);this.setState({youtube_ID:e}),!0===this.state.isEditing&&this.toggleTitle()}},{key:"addComment",value:function(e){var t=Object(E.a)(this.state.comments);t.push(e),this.setState({comments:t})}},{key:"removeComment",value:function(e){var t=Object(E.a)(this.state.comments);t.splice(e,1),this.setState({comments:t})}},{key:"handleInput",value:function(e){this.setState(Object(y.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e,t=this;return e=null===localStorage.getItem("login")?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Login to create a new Link")):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Create a new Link"),r.a.createElement(k.a,{className:"youtube-player ".concat(this.state.isCommenting?"":"hidden"),videoId:this.state.youtube_ID,opts:{height:"390",width:"640"},onPause:this.getTimestamp}),r.a.createElement("div",{className:"title ".concat(this.state.isCommenting?"":"hidden"," ").concat(this.state.isEditing?"hidden":"")},r.a.createElement("h3",null,"".concat(this.state.title,"//").concat(localStorage.getItem("username"))),r.a.createElement("button",{onClick:this.toggleTitle},"Edit")),r.a.createElement("form",{onSubmit:function(e){return t.props.submitLink(e,t.state)}},r.a.createElement("div",{className:"url-title ".concat(this.state.isEditing?"":"hidden")},r.a.createElement("input",{type:"url",name:"youtube_url",onChange:this.handleInput,value:this.state.youtube_url,placeholder:"Youtube URL"}),r.a.createElement("input",{type:"text",name:"title",onChange:this.handleInput,value:this.state.title,placeholder:"Title"}),r.a.createElement("button",{type:"button",onClick:this.showForm},"Continue")),this.state.comments.map((function(e,a){return r.a.createElement("div",{key:a},r.a.createElement("span",null,e.parsedStamp),r.a.createElement("span",null,e.body),r.a.createElement("button",{type:"button",onClick:function(){return t.removeComment(a)}},"Remove"))})),r.a.createElement(O,{className:"comment-form ".concat(this.state.isCommenting?"":"hidden"),addComment:this.addComment,timestamp:this.state.timestamp,parsedStamp:this.state.parsedStamp}),r.a.createElement("button",{className:"".concat(this.state.isCommenting?"":"hidden"),type:"submit"},"Save"))),r.a.createElement("div",{className:"container"},e)}}]),a}(r.a.Component),C=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={username:"",password:""},n.handleInput=n.handleInput.bind(Object(p.a)(n)),n}return Object(h.a)(a,[{key:"handleInput",value:function(e){this.setState(Object(y.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:function(t){return e.props.logIn(t,e.state)}},r.a.createElement("h2",null,"Login"),r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleInput,placeholder:"Username"}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleInput,placeholder:"Password"}),r.a.createElement("button",{type:"submit"},"Login")))}}]),a}(r.a.Component),S=Object(g.f)(C),I=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={username:"",email:"",password1:"",password2:""},n.handleInput=n.handleInput.bind(Object(p.a)(n)),n}return Object(h.a)(a,[{key:"handleInput",value:function(e){this.setState(Object(y.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:function(t){return e.props.handleRegister(t,e.state)}},r.a.createElement("h2",null,"Register"),r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleInput,placeholder:"Username"}),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",name:"email",value:this.state.email,onChange:this.handleInput,placeholder:"Email"}),r.a.createElement("label",{htmlFor:"password1"},"Password"),r.a.createElement("input",{type:"password",name:"password1",value:this.state.password1,onChange:this.handleInput,placeholder:"Password"}),r.a.createElement("label",{htmlFor:"password2"},"Confirm Password"),r.a.createElement("input",{type:"password",name:"password2",value:this.state.password2,onChange:this.handleInput,placeholder:""}),r.a.createElement("button",{type:"submit"},"Register")))}}]),a}(r.a.Component),w=Object(g.f)(I),T=a(16),F=a.n(T),L=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={isLoggedIn:!1},n.logIn=n.logIn.bind(Object(p.a)(n)),n.logOut=n.logOut.bind(Object(p.a)(n)),n.handleRegister=n.handleRegister.bind(Object(p.a)(n)),n.submitLink=n.submitLink.bind(Object(p.a)(n)),n}return Object(h.a)(a,[{key:"logOut",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/accounts/rest-auth/logout/",{method:"POST",headers:{"X-CSRFToken":F.a.get("csrftoken"),"Content-Type":"application/json"},body:JSON.stringify(F.a.get("Authorization"))});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,console.log("Response",a),F.a.remove("Authorization"),localStorage.removeItem("login"),localStorage.removeItem("username"),this.setState({isLoggedIn:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"logIn",value:function(){var e=Object(u.a)(c.a.mark((function e(t,a){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/accounts/rest-auth/login/",{method:"POST",headers:{"X-CSRFToken":F.a.get("csrftoken"),"Content-Type":"application/json"},body:JSON.stringify(a)});case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,console.log("Response",r),F.a.set("Authorization","Token ".concat(r.key)),localStorage.setItem("login","".concat(r.key)),localStorage.setItem("username","".concat(r.user.username)),this.props.history.push("/");case 12:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleRegister",value:function(){var e=Object(u.a)(c.a.mark((function e(t,a){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/accounts/rest-auth/registration/",{method:"POST",headers:{"X-CSRFToken":F.a.get("csrftoken"),"Content-Type":"application/json"},body:JSON.stringify(a)});case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,console.log("Response",r),F.a.set("Authorization","Token ".concat(r.key)),localStorage.setItem("login",r.key),localStorage.setItem("username","".concat(r.user.username)),this.props.history.push("/");case 12:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"submitLink",value:function(){var e=Object(u.a)(c.a.mark((function e(t,a){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/api/links/",{method:"POST",headers:{"X-CSRFToken":F.a.get("csrftoken"),"Content-Type":"application/json"},body:JSON.stringify(a)});case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,this.props.history.push("/links/".concat(localStorage.getItem("username"),"/your-links/").concat(r.id)),console.log("Response",r);case 9:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t;return null===localStorage.getItem("login")?(t=r.a.createElement(r.a.Fragment,null),e=r.a.createElement(r.a.Fragment,null,r.a.createElement(i.b,{to:"/register-form"},"Register"),r.a.createElement(i.b,{to:"/login-form"},"Login"))):(t=r.a.createElement(r.a.Fragment,null,r.a.createElement(i.b,{to:"/".concat(localStorage.getItem("username"),"/your-links")},"Your Links")),e=r.a.createElement(i.b,{onClick:this.logOut,to:"/"},"Logout")),r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,null,r.a.createElement(i.b,{to:"/"},"Home"),r.a.createElement(i.b,{to:"/create"},"Create"),r.a.createElement("div",{className:"user"},t,e)),r.a.createElement(g.c,null,r.a.createElement(g.a,{path:"/register-form"},r.a.createElement(w,{handleRegister:this.handleRegister})),r.a.createElement(g.a,{path:"/login-form"},r.a.createElement(S,{logIn:this.logIn})),r.a.createElement(g.a,{path:"/create"},r.a.createElement(j,{submitLink:this.submitLink})),r.a.createElement(g.a,{path:"/".concat(localStorage.getItem("username"),"/your-links")},r.a.createElement(f,null))))}}]),a}(r.a.Component),R=Object(g.f)(L),x=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,63)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),s(e),o(e)}))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,null,r.a.createElement(R,null))),document.getElementById("root")),x()}},[[59,1,2]]]);
//# sourceMappingURL=main.7d3df2bb.chunk.js.map